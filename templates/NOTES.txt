NeuralTrust Platform has been deployed!

{{- if .Values.infrastructure.clickhouse.deploy }}
ClickHouse has been deployed in this release.
{{- else }}
Using external ClickHouse at {{ .Values.infrastructure.clickhouse.external.host }}:{{ .Values.infrastructure.clickhouse.external.port }}
{{- end }}

{{- if .Values.infrastructure.kafka.deploy }}
Kafka has been deployed in this release.
{{- else }}
Using external Kafka at {{ .Values.infrastructure.kafka.external.bootstrapServers }}
{{- end }}

{{- $postgresql := false }}
{{- $postgresqlHost := "" }}
{{- $postgresqlPort := "" }}
{{- $postgresqlDeploy := false }}
{{- if and .Values.infrastructure .Values.infrastructure.postgresql (hasKey .Values.infrastructure.postgresql "deploy") }}
  {{- $postgresqlDeploy = .Values.infrastructure.postgresql.deploy }}
{{- end }}
{{- $cpValues := index .Values "neuraltrust-control-plane" }}
{{- if and (not $postgresqlDeploy) $cpValues $cpValues.infrastructure $cpValues.infrastructure.postgresql (hasKey $cpValues.infrastructure.postgresql "deploy") }}
  {{- $postgresqlDeploy = $cpValues.infrastructure.postgresql.deploy }}
{{- end }}
{{- if $postgresqlDeploy }}
  {{- $postgresql = true }}
  {{- $postgresqlHost = "control-plane-postgresql" }}
  {{- $postgresqlPort = "5432" }}
{{- else if and .Values.infrastructure .Values.infrastructure.postgresql .Values.infrastructure.postgresql.external }}
  {{- $postgresql = false }}
  {{- $postgresqlHost = .Values.infrastructure.postgresql.external.host }}
  {{- if .Values.infrastructure.postgresql.external.port }}
    {{- $postgresqlPort = .Values.infrastructure.postgresql.external.port }}
  {{- else }}
    {{- $postgresqlPort = "5432" }}
  {{- end }}
{{- end }}
{{- if $postgresql }}
PostgreSQL has been deployed in this release.
{{- else if $postgresqlHost }}
Using external PostgreSQL at {{ $postgresqlHost }}:{{ $postgresqlPort }}
{{- else }}
PostgreSQL configuration not specified.
{{- end }}

{{- $dpValues := index .Values "neuraltrust-data-plane" }}
{{- if and $dpValues $dpValues.dataPlane $dpValues.dataPlane.enabled }}
NeuralTrust Data Plane is enabled.
{{- end }}

{{- $cpValues := index .Values "neuraltrust-control-plane" }}
{{- if and $cpValues $cpValues.controlPlane $cpValues.controlPlane.enabled }}
NeuralTrust Control Plane is enabled.
{{- end }}

{{- if .Values.trustgate.enabled }}
TrustGate is enabled.
{{- end }}

To get the status of your deployment, run:
  kubectl get pods -n {{ .Release.Namespace }}

To view logs for specific components:
{{- $cpValues := index .Values "neuraltrust-control-plane" }}
{{- if and $cpValues $cpValues.controlPlane $cpValues.controlPlane.enabled }}
  # NeuralTrust Control Plane
  kubectl logs -n {{ .Release.Namespace }} -l app.kubernetes.io/name=neuraltrust-control-plane,app.kubernetes.io/instance={{ .Release.Name }}
{{- end }}
{{- $dpValues := index .Values "neuraltrust-data-plane" }}
{{- if and $dpValues $dpValues.dataPlane $dpValues.dataPlane.enabled }}
  # NeuralTrust Data Plane
  kubectl logs -n {{ .Release.Namespace }} -l app.kubernetes.io/name=neuraltrust-data-plane,app.kubernetes.io/instance={{ .Release.Name }}
{{- end }}
{{- if .Values.trustgate.enabled }}
  # TrustGate Control Plane
  kubectl logs -n {{ .Release.Namespace }} -l app.kubernetes.io/name=trustgate,app.kubernetes.io/instance={{ .Release.Name }},component=control-plane
  # TrustGate Data Plane
  kubectl logs -n {{ .Release.Namespace }} -l app.kubernetes.io/name=trustgate,app.kubernetes.io/instance={{ .Release.Name }},component=data-plane
{{- end }}
{{- if .Values.infrastructure.clickhouse.deploy }}
  # ClickHouse
  kubectl logs -n {{ .Release.Namespace }} -l app.kubernetes.io/name=clickhouse,app.kubernetes.io/instance={{ .Release.Name }}
{{- end }}
{{- if .Values.infrastructure.kafka.deploy }}
  # Kafka
  kubectl logs -n {{ .Release.Namespace }} -l app.kubernetes.io/name=kafka,app.kubernetes.io/instance={{ .Release.Name }}
{{- end }}

To view logs for all pods in the namespace:
  kubectl logs -n {{ .Release.Namespace }} --all-containers=true -l app.kubernetes.io/instance={{ .Release.Name }}

For more information, see the README.md file.

