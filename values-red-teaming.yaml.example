# Example: Deploy NeuralTrust Platform without TrustGate (For Red Teaming only)
# This example shows how to deploy all infrastructure and NeuralTrust services
# without TrustGate (API Gateway) - useful for red teaming scenarios
#
# Usage:
#   helm install neuraltrust-platform . -f values-red-teaming.yaml.example
#
# This example shows:
# - Deploying all infrastructure components (ClickHouse, Kafka, PostgreSQL)
# - Deploying all NeuralTrust components (Control Plane and Data Plane)
# - TrustGate is disabled (trustgate.enabled: false)
# - Using Helm-managed secrets (preserveExistingSecrets: false)
# - Using Ingress for external access (Kubernetes) or Routes (OpenShift)

# Global settings
global:
  openshift: false  # Set to true if using OpenShift
  openshiftDomain: ""  # OpenShift wildcard DNS domain (e.g., *.apps.example.com)
  imageRegistry: ""  # Global image registry prefix
  preserveExistingSecrets: false  # Set to true if secrets are pre-generated
  storageClass: ""  # Global storage class for persistent volumes

# Infrastructure Components - Deploy all
infrastructure:
  clickhouse:
    deploy: true  # Deploy ClickHouse
    # ClickHouse chart values are passed via root-level 'clickhouse:' section
    # See values.yaml for full configuration

  kafka:
    deploy: true  # Deploy Kafka
    # Kafka chart values are passed via root-level 'kafka:' section
    # See values.yaml for full configuration

  postgresql:
    deploy: true  # Deploy PostgreSQL (via control-plane subchart)
    # PostgreSQL chart values are passed via 'neuraltrust-control-plane.controlPlane.components.postgresql:' section below

# NeuralTrust Control Plane - Deploy all components
neuraltrust-control-plane:
  controlPlane:
    enabled: true
    imagePullSecrets: "gcr-secret"  # Set imagePullSecrets for all control-plane components
    secrets:
      controlPlaneJWTSecret: "your-control-plane-jwt-secret"  # Define this value
      trustgateJwtSecret: "dummy-trustgate-jwt-secret"  # Dummy value (TrustGate is disabled, but this is still required by the chart)
    components:
      postgresql:
        secrets:
          password: "your-postgres-password"  # Define this value
          database: "neuraltrust"
      api:
        enabled: true
        host: "control-plane-api.example.com"
        ingress:
          enabled: true  # Use Ingress for external access
      app:
        enabled: true
        host: "control-plane-app.example.com"
        ingress:
          enabled: true  # Use Ingress for external access
      scheduler:
        enabled: true
        host: "control-plane-scheduler.example.com"
        ingress:
          enabled: true  # Use Ingress for external access

# NeuralTrust Data Plane - Deploy all components
neuraltrust-data-plane:
  dataPlane:
    enabled: true
    imagePullSecrets: "gcr-secret"  # Set imagePullSecrets for all data-plane components
    secrets:
      dataPlaneJWTSecret: "your-data-plane-jwt-secret"  # Define this value
    components:
      clickhouse:
        enabled: true  # ClickHouse will be deployed via infrastructure.clickhouse.deploy
        host: "clickhouse"  # Internal service name
      kafka:
        enabled: true  # Kafka will be deployed via infrastructure.kafka.deploy
      api:
        enabled: true
        host: "data-plane-api.example.com"
        ingress:
          enabled: true  # Use Ingress for external access
      worker:
        enabled: true

# TrustGate - Disabled
trustgate:
  enabled: false  # TrustGate is not deployed in this configuration
